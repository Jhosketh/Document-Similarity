Following Dumbledore's death, Voldemort consolidates his support and power, including covert control of the Ministry of Magic, while Harry is about to turn seventeen, losing the protection of his home. The Order of the Phoenix move Harry to a new location before his birthday, but are attacked upon departure. Mad-Eye is killed, and George Weasley wounded, the rest arrive safely.

Abandoning school, Ron and Hermione accompany Harry to finish Dumbledore's quest: to hunt and destroy Voldemort's four remaining Horcruxes. Initially they have very few clues—one is a locket once owned by Hogwarts' co-founder Salazar Slytherin which was stolen by the mysterious "R.A.B.", one is possibly a cup originally belonging to co-founder Helga Hufflepuff, a third might be connected to co-founder Rowena Ravenclaw, and the fourth might be Nagini, Voldemort's snake familiar. They also receive apparently meaningless bequests from Dumbledore's possessions—a Golden Snitch for Harry, a Deluminator for Ron, and a book of fairy tales for Hermione.

Before leaving, they attend Ron's brother Bill's wedding, but the Ministry of Magic finally falls to Voldemort and the wedding is attacked. They flee to 12 Grimmauld Place in London, the family home of Sirius Black and headquarters of the Order of the Phoenix, where they identify R.A.B. as Sirius' brother Regulus Black, and learn from the house-elf Kreacher that Slytherin's locket was stolen from the house and then seized by Dolores Umbridge of the Ministry of Magic. They infiltrate the Ministry of Magic and take back the locket, but have no way to destroy it. Under the object's evil influence and the strain of constant vigilance, they argue and Ron leaves.

Harry and Hermione continue the quest, discovering more about Dumbledore's past, including the death of Dumbledore's younger sister and his connection to the dark wizard Grindelwald. They travel to Godric's Hollow, Harry's birthplace and the place where his parents died, and meet the elderly magical historian Bathilda Bagshot, but she turns out to be Nagini in disguise, awaiting their arrival; the snake attacks Harry and again they barely escape, this time to the Forest of Dean, where their luck appears to turn. A mysterious silver doe, similar to a Patronus, appears and silently guides Harry to an icy pond containing the Sword of Hogwarts co-founder Godric Gryffindor, a Goblin-made weapon and one of the few objects able to destroy Horcruxes. During Harry's attempt to recover the sword, the Horcrux attempts to kill him. He is saved by Ron, who was guided back by the deluminator, and they realise Dumbledore's gifts may be meaningful. Ron obtains the sword, and uses it to destroy the locket.

Harry continues to have visions of Voldemort torturing and killing wizards, apparently in pursuit of some object. Hermione identifies in her book, a strange symbol also worn at the wedding by Xenophilius Lovegood. They visit him and are told the symbol represents the mythical Deathly Hallows, three objects from an old fairy tale titled The Tale of the Three Brothers: the Elder Wand, an unbeatable wand; the Resurrection Stone, able to summon the dead; and an infallible Invisibility Cloak. Harry realises that Voldemort is seeking (and shortly afterwards, successfully obtains) the Elder Wand, won by Dumbledore after Grindelwald's defeat, recognises the Resurrection Stone as that found by Dumbledore which had become the second Horcrux, and his own inherited Invisibility Cloak as the third Hallow.

The trio are captured and taken to Malfoy Manor, where Bellatrix Lestrange tortures Hermione to learn how the three acquired the sword, which she had believed was in her vault at Gringotts bank. They escape, along with Luna Lovegood, Ollivander, Dean Thomas, and the goblin Griphook, aided by the elf Dobby. During the escape Harry disarms Draco Malfoy and Dobby dies. Bellatrix' terror in interrogating Hermione suggests to Harry that some exceptional object is in her vault, and when questioned, Griphook confirms that a gold cup is indeed in her vault. They break into the vault, retrieve the cup, and escape on a dragon, although they lose the sword. Harry has a vision of Voldemort and sees that he now understands their plan, and intends to make his remaining horcruxes even safer. The vision also confirms that the unidentified horcrux is at Hogwarts.

They enter the school through an undiscovered secret entrance. The teachers drive out Snape, and defend the school to win time for Harry to locate the penultimate horcrux. Voldemort had set a guard in the Ravenclaw tower, corroborating Harry's belief that the horcrux is Rowena Ravenclaw's diadem, lost centuries ago. The Ravenclaw ghost's story further confirms this belief, and Harry remembers an old diadem in the Room of Requirement. Ron and Hermione destroy the cup with basilisk fangs from the Chamber of Secrets as Voldemort and his army besiege the castle. They find the diadem but are ambushed by Draco Malfoy and his friends Crabbe and Goyle. Crabbe tries to kill them using Fiendfyre, a cursed fire, but is unable to control it; the fire destroys the diadem and himself. Harry and his friends save Malfoy and Goyle, and several major characters are killed in the battle, including Remus Lupin, Nymphadora Tonks, and Fred Weasley.

In his encampment, Voldemort feels that the Elder Wand is not performing as he expected. According to legend, its allegiance must be won by killing the previous owner, and Voldemort concludes—incorrectly—that as Snape killed Dumbledore, he will not be able to fully wield the wand's power until he kills Snape, which he does. Harry arrives as Snape is dying, and Snape passes him memories to view in a pensieve. They reveal finally, that Snape had a lifelong love for Harry's mother, and felt haunted by causing her death, that despite hating Harry's father he agreed at Dumbledore's request to watch over their son Harry and act as a double agent against Voldemort, that Dumbledore's death was planned with Snape in advance, that Snape cast the doe Patronus to lead Harry to the sword, and that—apparently—he himself must die if Voldemort is to be killed. He accepts his death and Dumbledore's scheming that has guided his life, and goes to seek out and be killed by Voldemort. On the way he tells Neville Longbottom that Voldemort's snake Nagini—the last known horcrux—must be killed to make Voldemort vulnerable. He uses the Resurrection Stone to seek comfort and courage from his dead loved ones—his parents, Sirius and Lupin—dropping the stone in the forest before reaching Voldemort's camp. Voldemort uses the Killing Curse and Harry does not defend himself.

Harry awakens in a dreamlike location somewhat like Kings Cross Station, and is greeted by Dumbledore who explains that Voldemort's original Killing Curse left a fragment of Voldemort's soul in Harry which caused the connection they had felt, that when Voldemort used Harry's blood to regain his full strength, this further protected Harry from Voldemort, that this fragment of Voldemort's soul has now been killed by Voldemort's own spell, and that Harry is free to return or "go on". Harry chooses to return and feigns death. Voldemort displays Harry's body and offers a truce if the defenders surrender, but Neville kills Nagini with the sword, leaving Voldemort unprotected, and Harry escapes under his cloak as the battle resumes.

In a final onslaught, Bellatrix is killed and Harry reveals to Voldemort that he is alive. He explains to Voldemort that the Elder Wand's loyalty transfers upon the defeat, not necessarily the killing, of its previous master. Although Voldemort believed he has won the wand's allegiance by killing Snape, who killed Dumbledore, in fact he (Harry) had defeated Draco Malfoy who had previously disarmed Dumbledore. Therefore, the outcome of their duel will depend upon whether the Elder Wand knows its previous master was disarmed, which will have left Harry as its true master, even though neither Draco nor Harry ever physically held it. He also explains that his attempted self-sacrifice has protected the remaining defendants, who can now no longer be hurt by Voldemort. Harry urges Voldemort to feel remorse, in order to save his soul. Enraged, Voldemort attempts one final Killing Curse, but the Elder Wand refuses to act against Harry and the spell rebounds, killing him finally.

After Voldemort's death, Harry uses the Elder Wand to repair his original broken wand, saying that he will return it to Dumbledore's tomb, where its power may vanish if Harry dies undefeated and where it may drop out of history, and the wizarding world returns to peace once more.